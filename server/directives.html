<!DOCTYPE html>
<html>
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <title>Директивы предварительной обработки</title>
      <link href="files/style.css" rel="stylesheet">
      <script src="files/jquery-2.1.0.min.js" type="text/javascript"></script>
      <script src="files/main.js"></script>
</head>

<body>
<div id="header">Справочник по DSL</div>
<div id="main">
<h1>Директивы предварительной обработки</h1>
<p class="content"><img src="images/line.png"></p>
<p class="content"><a href="#main" class="content">Общее описание</a></p>
<p class="content"><a href="#name" class="content">Директива <span class="code">#NAME</span></a></p>
<p class="content"><a href="#index" class="content">Директива <span class="code">#INDEX_LANGUAGE</span></a></p>
<p class="content"><a href="#contents" class="content">Директива <span class="code">#CONTENTS_LANGUAGE</span></a></p>
<p class="content"><a href="#source" class="content">Директива <span class="code">#SOURCE_CODE_PAGE</span></a></p>
<p class="content"><a href="#include" class="content">Директива <span class="code">#INCLUDE</span></a></p>
<p class="content"><a href="#icon" class="content">Директива <span class="code">#ICON_FILE</span></a></p>
<p class="content"><a href="#lang" class="content">Директива <span class="code">#LANGUAGE</span></a></p>
<p class="content"><img src="images/line.png"></p>


<a name="main"></a>
<h2>Общее описание</h2>
<p>Синонимами к термину «директива предварительной обработки» являются выражения: директива препроцессора, команда препроцессора, <abbr title="английское">англ.</abbr> preprocessor directive, <abbr title="английское">англ.</abbr> preprocessor command.</p>
<p>Директива предварительной обработки – это команда к выполнению программы предварительной обработки данных до начала основного процесса обработки данных. Подобные программы называются препроцессорами и обычно используются при таких задачах, как компилирование. Одно компилирование может предварять несколько разных препроцессоров. Во многих языках программирования при написании кода употребляются директивы препроцессора, например в C, Perl и других.</p>
<p>В словарях DSL директивы предварительной обработки всегда располагаются в самом начале (в первых строках) файлов основного текста и аббревиатур. В аннотациях возможно использование одной, необязательной директивы, которая может располагаться на любой строке файла, а не только на первой.</p>
<p>Директивы делятся на обязательные и необязательные. Обязательных директив всего три: <span class="code">#NAME</span>, <span class="code">#INDEX_LANGUAGE</span> и <span class="code">#CONTENTS_LANGUAGE</span>. При отсутствии одной из них процесс компилирования словаря прервётся с сообщением об ошибке.</p>
<p>Директива в DSL состоит из ключевого слова и значения. Ключевое слово директивы всегда начинается со знака «решётки». Значение заключается в кавычки и отделяется от ключевого слова при помощи пробела (одного или нескольких) или табуляции (одной или нескольких).</p>
<p style="text-align:center;"><img src="images/directive.png"></p>
<p>Одна директива занимает одну, отдельную строку файла. Команда директивы (знак «решётки») должна располагаться в начале строки (на первой позиции). Наличие перед командой пробела, табуляции или любого другого символа приведёт к ошибке при компилировании.</p>
<p>Несколько директив, следующих друг за другом, составляют заголовочную часть словаря, т.н. «шапку». Между строками директив допускается наличие пустых строк (двух или более символов новой строки и/или перевода каретки подряд).</p>
<p>Порядок расположения директив в «шапке» относительно друг друга не имеет значения. Однако, при составлении словарей, рекомендуется соблюдать следующий порядок следования:</p>
<ol>
  <li>На первом месте (строке) директива <span class="code">#NAME</span>.</li>
  <li>На втором месте (строке) директива <span class="code">#INDEX_LANGUAGE</span>.</li>
  <li>На третьем месте (строке) директива <span class="code">#CONTENTS_LANGUAGE</span>.</li>
  <li>На следующих местах (строках) другие необязательные директивы.</li>
</ol>
<div class="CodeBox">
<p class="CodeBoxHead">Пример обязательной «шапки» :: Запись в DSL</p>
<div class="Code"><pre>#NAME			"Словарь синонимов (Ru-Ru)"
#INDEX_LANGUAGE		"Russian"
#CONTENTS_LANGUAGE	"Russian"

карточка
	[m1]фотография, снимок; визитка[/m]</pre></div></div>
<p>Известно, что директивы использовались в словарях DSL, начиная с версии 6.0 (<i>более ранние не проверялись</i>). Первоначально существовали, причём недокументированно, всего лишь две директивы: <span class="code">#FULL_NAME</span> и <span class="code">#LANGUAGE</span> &ndash; первая содержала наименование словаря, а вторая &ndash; язык словарных заголовков. В версии 8.0 было введено в употребление основное большинство современных директив и правила их использования были освещены в официальном справочном руководстве.</p>


<a name="name"></a>
<h2>Директива <span class="code">#NAME</span></h2>
<p><strong>Назначение:</strong> Указание «внутреннего» наименования словаря.</p>
<p><strong>Использование:</strong> Только в файлах основного текста и аббревиатур.</p>
<p><strong>Синтаксис:</strong> Обязательная директива. Должна располагаться в начале файла, в его первых строках.</p>
<p>Команда директивы <span class="code">#</span> («решётка») должна располагаться в начале строки (на первой позиции). Наличие перед командой пробела, табуляции или любого другого символа приведёт к ошибке при компилировании.</p>
<p>Длина «внутреннего» наименования словаря не должна превышать 255 символов.</p>
<p>Во «внутреннем» наименовании не рекомендуется употреблять символы квадратных скобок <span class="code">[ ]</span>, т.к. они вызывают ошибку в оболочке Lingvo версий x5 и выше<a name="ref1"></a><a href="#comm1"><sup>[1]</sup></a>.</p>
<p><strong>Значение директивы:</strong> Значением является «внутреннее» наименование словаря. «Внутренним» оно называется потому, что используется для отображения в окнах словарной программы. В Lingvo это наименование отображается в верхней правой части словарной карточки (<em>или в левой, если язык словаря – правосторонний</em>) и во всех списках словарей. В силу характера использования это наименование должно быть по возможности лаконичным и выразительным для того, чтобы оно лучше воспринималось и умещалось в упомянутых местах. В конце названия рекомендуется указывать языковую пару словаря в скобках через дефис. В словарях от ABBYY, поставляемых вместе с Lingvo, пары языков обозначаются 2-буквенными сокращениями, согласно стандарту <a href="langs.html#supported">ISO-639-1</a>. «Соглашение» лексикографов в данном случае рекомендует использовать 3-буквенные сокращения, по стандарту <a href="langs.html#iso">ISO-639-3</a> (или <a href="langs.html#iso">ISO-639-2</a>).</p>
<div class="CodeBox">
<p class="CodeBoxHead">Пример директивы #NAME :: Запись в DSL</p>
<div class="Code"><pre>#NAME	"Синонимы и антонимы (Ru-Ru)"</pre></div></div>
<br>
<table cellpadding="50">
<col width="330">
<tr><th>Рекомендуемая форма наименований</th><th>Нерекомендуемая форма наименований</th></tr>
<tr><td class="lpad"><span class="code">Малый академический словарь (Ru-Ru)</span></td><td class="lpad"><span class="code_error">Малый академический словарь русского языка</span></td></tr>
<tr><td class="lpad"><span class="code">Греческие пословицы и поговорки (El-Ru)</span></td><td class="lpad"><span class="code_error">Новогреческо-русский словарь греческих пословиц и поговорок с подбором аналогов в русском языке (El-Ru)</span></td></tr>
<tr><td class="lpad"><span class="code">Marketing (En-Ru)</span></td><td class="lpad"><span class="code_error">The New English-Russian Dictionary of Marketing and Commerce</span></td></tr>
</table>
<p><strong>История:</strong> Директива введена в употребление в Lingvo версии 8.0.</p>


<a name="index"></a>
<h2>Директива <span class="code">#INDEX_LANGUAGE</span></h2>
<p><strong>Назначение:</strong> Указание языка заголовков словаря.</p>
<p><strong>Использование:</strong> Только в файлах основного текста и аббревиатур.</p>
<p><strong>Синтаксис:</strong> Обязательная директива. Должна располагаться в начале файла, в его первых строках.</p>
<p>Команда директивы <span class="code">#</span> («решётка») должна располагаться в начале строки (на первой позиции). Наличие перед командой пробела, табуляции или любого другого символа приведёт к ошибке при компилировании.</p>
<p><strong>Значение директивы:</strong> Значением является английское наименование языка согласно стандарту <a href="langs.html#iso">ISO-639-2</a>. Могут быть использованы только языки, поддерживаемые в Lingvo (<em>см. <a href="langs.html#supported">Список поддерживаемых языков</a></em>). Значение чувствительно к регистру символов и должно указываться в точности так, как оно приводится в <a href="langs.html#iso">ISO-639-2</a>. Так, например, форма <span class="code">"English"</span> является правильной, а <span class="code_error">"english"</span> и <span class="code_error">"ENGLISH"</span> вызовут ошибку при компилировании.</p>
<div class="CodeBox">
<p class="CodeBoxHead">Пример директивы языка заголовков :: Запись в DSL</p>
<div class="Code"><pre>#INDEX_LANGUAGE		"English"</pre></div></div>
<p><strong>Особенности:</strong> Если в значении указать неподдерживаемый в Lingvo язык, то компилирование словаря прервётся с сообщением об ошибке.</p>
<p>Если фактический язык заголовков не соответствует языку, указанному в директиве, то это повлияет на некоторые возможности программы Lingvo. <em>Подробнее об этом см. в главе о <a href="tag_handling.html#lang">тэге языковой разметки</a>.</em></p>
<p><strong>История:</strong> Директива введена в употребление в Lingvo версии 8.0.</p>


<a name="contents"></a>
<h2>Директива <span class="code">#CONTENTS_LANGUAGE</span></h2>
<p><strong>Назначение:</strong> Указание языка переводной / толковательной части словаря.</p>
<p><strong>Использование:</strong> Только в файлах основного текста и аббревиатур.</p>
<p><strong>Синтаксис:</strong> Обязательная директива. Должна располагаться в начале файла, в его первых строках.</p>
<p>Команда директивы («решётка») должна располагаться в начале строки (на первой позиции). Наличие перед командой пробела, табуляции или любого другого символа приведёт к ошибке при компилировании.</p>
<p><strong>Значение директивы:</strong> Значением является английское наименование языка согласно стандарту <a href="langs.html#iso">ISO-639-2</a>. Могут быть использованы только языки, поддерживаемые в Lingvo (<em>см. <a href="langs.html#supported">Список поддерживаемых языков</a></em>). Значение чувствительно к регистру символов и должно указываться в точности так, как оно приводится в <a href="langs.html#iso">ISO-639-2</a>. Так, например, форма <span class="code">"English"</span> является правильной, а <span class="code_error">"english"</span> и <span class="code_error">"ENGLISH"</span> вызовут ошибку при компилировании.</p>
<div class="CodeBox">
<p class="CodeBoxHead">Пример директивы языка переводов :: Запись в DSL</p>
<div class="Code"><pre>#CONTENTS_LANGUAGE		"Russian"</pre></div></div>
<p><strong>Особенности:</strong> Если в значении указать неподдерживаемый в Lingvo язык, то компилирование словаря прервётся с сообщением об ошибке.</p>
<p>Если фактический язык переводов не соответствует языку, указанному в директиве, то это повлияет на такие возможности программы Lingvo, как поиск, показ грамматических форм слов и другие. <em>Подробнее об этом см. в главе о <a href="tag_handling.html#lang">тэге языковой разметки</a>.</em></p>
<p><strong>История:</strong> Директива введена в употребление в Lingvo версии 8.0.</p>


<a name="source"></a>
<h2>Директива <span class="code">#SOURCE_CODE_PAGE</span></h2>
<p><strong>Назначение:</strong> Указание имени кодовой страницы.</p>
<p><strong>Использование:</strong> Только в файлах основного текста и аббревиатур. Только в случаях, когда файл словаря сохранён в кодировке ANSI.</p>
<p><strong>Синтаксис:</strong> Необязательная директива. Должна располагаться в начале файла, в его первых строках.</p>
<p>Команда директивы <span class="code">#</span> («решётка») должна располагаться в начале строки (на первой позиции). Наличие перед командой пробела, табуляции или любого другого символа приведёт к ошибке при компилировании.</p>
<p><strong>Значение директивы:</strong> Значением является специальное наименование кодовой страницы в Windows. Могут быть использованы только наименования, поддерживаемые в Lingvo (<em>см. главу «<a href="langs.html#ansi">Кодовые страницы ANSI в Windows</a>»</em>). Значение чувствительно к регистру символов и должно указываться в точности так, как оно приводится в указанном списке. Так, например, форма <span class="code">"English"</span> является правильной, а <span class="code_error">"english"</span> и <span class="code_error">"ENGLISH"</span> вызовут ошибку при компилировании.</p>
<div class="CodeBox">
<p class="CodeBoxHead">Пример директивы кодовой страницы :: Запись в DSL</p>
<div class="Code"><pre>#SOURCE_CODE_PAGE		"EasternEuropean"</pre></div></div>
<p><strong>Замечания:</strong> Если файл словаря сохранён в кодировке Unicode (UTF-16 LE), то использование директивы (<em>т.е. дополнительное определение кодовой страницы</em>) не требуется. В этом случае компилятор проигнорирует значение директивы.</p>
<p>При сохранении файла словаря в кодировке ANSI важно учесть, что язык заголовков и язык перевода / толкований должны принадлежать одной кодовой странице. Если это не так, файл должен быть сохранен в кодировке Unicode. <em>Соответствия языков и их кодовых страниц см. в таблице <a href="langs.html#lcid">Коды локалей Microsoft</a>.</em></p>
<p><strong>История:</strong> Директива введена в употребление в Lingvo версии 8.0.</p>


<a name="include"></a>
<h2>Директива <span class="code">#INCLUDE</span></h2>
<p><strong>Назначение:</strong> Добавление дополнительных файлов с текстом словаря.</p>
<p><strong>Использование:</strong> Только в файлах основного текста.</p>
<p><strong>Синтаксис:</strong> Необязательная директива. Должна располагаться в начале файла, в его первых строках.</p>
<p>Команда директивы <span class="code">#</span> («решётка») должна располагаться в начале строки (на первой позиции). Наличие перед командой пробела, табуляции или любого другого символа приведёт к ошибке при компилировании.</p>
<p>Обратную косую черту, используемую в значении директивы (в пути к файлу), необходимо удваивать: <span class="code">\\</span>.</p>
<p><strong>Значение директивы:</strong> Значением является путь к дополнительному файлу с текстом словаря. Пути могут быть абсолютными и относительными.</p>
<div class="CodeBox">
<p class="CodeBoxHead">Указание абсолютного пути :: Запись в DSL</p>
<div class="Code"><pre>#INCLUDE		"c:\\Lingvo\\Dictionaries\\rus-rus_synonyms-2.dsl"</pre></div></div>
<br>
<div class="CodeBox">
<p class="CodeBoxHead">Дополнительный файл в одной папке с исходным :: Запись в DSL</p>
<div class="Code"><pre>#INCLUDE		"rus-rus_synonyms-2.dsl"</pre></div></div>
<br>
<div class="CodeBox">
<p class="CodeBoxHead">Дополнительный файл в подпапке рядом с исходным :: Запись в DSL</p>
<div class="Code"><pre>#INCLUDE		"Extra\\rus-rus_synonyms-2.dsl"</pre></div></div>
<br>
<div class="CodeBox">
<p class="CodeBoxHead">Дополнительный файл папкой выше от исходного :: Запись в DSL</p>
<div class="Code"><pre>#INCLUDE		"..\\Thesaurus\\rus-rus_synonyms-2.dsl"</pre></div></div>
<p><strong>Замечание:</strong> Директива обрабатывается следующим образом. Во время компилирования основного файла словаря, его содержимое объединяется с содержимым дополнительного файла и записывается в результирующий файл <span class="code_names">*.lsd</span>.</p>
<p><strong>История:</strong> Первое упоминание об употреблении этой директивы встречается в официальном справочном руководстве к Lingvo версии 9.0.</p>


<a name="icon"></a>
<h2>Директива <span class="code">#ICON_FILE</span></h2>
<div class="ninja"><span class="ninja">Недокументированная директива</span></div>
<p><strong>Назначение:</strong> Указание местонахождения файла иконки для словаря.</p>
<p><strong>Использование:</strong> Только в файлах основного текста.</p>
<p><strong>Синтаксис:</strong> Необязательная директива. Должна располагаться в начале файла, в его первых строках.</p>
<p>Команда директивы <span class="code">#</span> («решётка») должна располагаться в начале строки (на первой позиции). Наличие перед командой пробела, табуляции или любого другого символа приведёт к ошибке при компилировании.</p>
<p>Обратную косую черту, используемую в значении директивы (в пути к файлу), необходимо удваивать: <span class="code">\\</span>.</p>
<p><strong>Значение директивы:</strong> Значением является путь к файлу иконки. Пути могут быть абсолютными и относительными. <em>Примеры путей см. выше в главе «<a href="#include">Директива #INCLUDE</a>».</em></p>
<p><strong>История:</strong> Директива появилась в системных словарях Lingvo, начиная с версий x5 (15.0).</p>


<a name="lang"></a>
<h2>Директива <span class="code">#LANGUAGE</span></h2>
<p><strong>Назначение:</strong> Языковая разметка словарных аннотаций.</p>
<p><strong>Использование:</strong> Только в файлах аннотаций <span class="code_names">*.ann</span>.</p>
<p><strong>Синтаксис:</strong> Необязательная директива. Может располагаться на любой строке файла, а не только на первой.</p>
<p>Команда директивы <span class="code">#</span> («решётка») должна располагаться в начале строки (на первой позиции). Наличие перед командой пробела, табуляции или любого другого символа приведёт к ошибке при компилировании.</p>
<p><strong>Значение директивы:</strong> Значением является полное английское наименование языка по стандарту <a href="langs.html#iso">ISO-639-2</a>. Значение чувствительно к регистру символов и должно указываться в точности так, как оно приводится в <a href="langs.html#iso">ISO-639-2</a>. Так, например, форма <span class="code">"English"</span> является правильной, а <span class="code_error">"english"</span> и <span class="code_error">"ENGLISH"</span> вызовут ошибку при компилировании.</p>
<p><strong>Общее описание:</strong> Директива условно делит аннотацию на части. Одной частью считается фрагмент текста от одной строки с директивой до другой строки с директивой или до конца файла. Каждой части присваивается язык, указанный в значении её директивы.</p>
<div class="CodeBox">
<p class="CodeBoxHead">Употребление директив #LANGUAGE :: Запись в ANN</p>
<div class="Code"><pre>#LANGUAGE "Russian"
LatinAmerican (Es-Ru) (к версии ABBYY Lingvo x5)

Испанско-русский словарь. Латинская Америка. © «Русский язык-Медиа», 2004, Фирсова Н.М. 50 тыс. слов и словосочетаний.

#LANGUAGE "English"
LatinAmerican (Es-Ru) (for ABBYY Lingvo x5)

The Spanish-Russian Dictionary of Latin America. © Russkiy Yazyk - Media, 2004, N.M. Firsova. 50,000 words and phrases.

#LANGUAGE "Ukrainian"
LatinAmerican (Es-Ru) (до версії ABBYY Lingvo x5)

Іспансько-російський словник. Латинська Америка. © «Русский язык-Медиа», 2004, Фірсова Н.М. 50 тис. слів і словосполучень.
</pre></div></div>
<p>В зависимости от языка интерфейса, выбранного в настройках программы, в окне аннотации будет отображаться соответствующая языковая часть, а части других языков будут скрыты. Выбор языков для употребления в значениях директивы ограничен набором языков интерфейса конкретной версии Lingvo. Например, в Lingvo x6 доступны шесть языков (<em>хотя соответствующие языки интерфейса есть только у первых четырёх, а два последних просто включены в аннотации всех системных словарей</em>):</p>
<table class="list">
	<tr class="list">
	  <td class="list">Английский</td>
	  <td class="list">English</td>
	</tr>
	<tr class="list">
	  <td class="list">Русский</td>
	  <td class="list">Russian</td>
	</tr>
	<tr class="list">
	  <td class="list">Украинский</td>
	  <td class="list">Ukrainian</td>
	</tr>
	<tr class="list">
	  <td class="list">Казахский</td>
	  <td class="list">Kazakh</td>
	</tr>
	<tr class="list">
	  <td class="list">Немецкий</td>
	  <td class="list">German</td>
	</tr>
	<tr class="list">
	  <td class="list">Французский</td>
	  <td class="list">French</td>
	</tr>
</table>
<p>В Lingvo x5 был доступен ещё Испанский (SpanishTraditionalSort).</p>
<p>Если в аннотации отсутствует одна из возможных языковых частей, то, при выборе в Lingvo интерфейса этого языка, будет отображена часть на английском языке.</p>
<p><strong>Замечание:</strong> Программа GoldenDict не поддерживает обработку данной директивы.</p>
<p><strong>История:</strong> В версиях Lingvo 6.0 и 7.0 эта директива использовалась в файле основного текста и её значением было указание на язык словарных заголовков. В версии 8.0 состав директив был переработан и употребление <span class="code">#LANGUAGE</span> было отвергнуто. Позднее директива перекочевала в файл аннотации. Первое упоминание о ней в контексте создания аннотаций встречается в официальном справочном руководстве к Lingvo версии 12.0.</p><br>
<p><img src="images/line.png"></p>
<p><a name="comm1"></a><a href="#ref1"><sup>[1]</sup></a> <i>Если во внутреннем наименовании словаря присутствуют символы квадратных скобок, то в Lingvo x5 после перезапуска оболочки такой словарь самопроизвольно пропадает с полки, а в Lingvo x6 вдобавок перестаёт показывать карточки (т.е. при щелчке по заголовкам карточки не открываются). В Lingvo x3 и в GoldenDict этой проблемы нет.</i></p>

</div>
<div id="footer">
<p>Справочник по DSL • <a href="changes.html">Версия 0.9.6 alpha 2</a> • 04.08.2020</p>
<p>Public Domain 2020 yozhic. Свободный контент. Все права открыты и неограничены. Никаких гарантий и ответственности.</p>
</div>
</body>
</html>
